var Integrated=function($){function integrated(option){this._option=option,this._typeName=void 0==option.typeName?"default":option.typeName,"approval"==this._typeName&&(this._sender=!1),this._selector=option.contains,this.init()}return integrated.prototype.init=function(){var _this=this,clickIdx=[];switch($(".tab-st01 a").click(function(){clickIdx=new Array}),$.fn.memberCount=function(member){var personnel,$formReceiver=$(member).parents(".form-receiver-list"),$list=$formReceiver.find("ul"),$personnel=$formReceiver.find(".list-control .total em");personnel=$(member).hasClass("button-img")?$list.find("li:last").index():$list.find("li").length,$personnel.text(personnel)},$.fn.listNumber=function(number){var delIdx,$list=$(number).parents(".form-receiver-list").find("ul"),listLength=$list.children("li").length;for(delIdx=$(number).hasClass("button-img")?$(number).parents("li").index():1,i=delIdx;i<listLength;i++)$(number).hasClass("button-img")?$list.children("li").eq(i).children(".num").text(i-1):$list.children("li").eq(i).children(".num").text(i)},this._selector.on("click",".form-receiver-list > ul > li",function(event){var $list=$(this).parent("ul"),$listControl=$(this).parents(".form-receiver-list").children(".list-control"),idx=$(this).index(),clickLength=clickIdx.length,clickLastIdx=clickIdx[clickLength-1];if(clickIdx.push(idx),event.ctrlKey){$(this).toggleClass("current"),"approval"==_this._typeName&&$list.children("li.current").each(function(){currentLength=$list.children("li.current").length})}else if(event.shiftKey){var currentLength;if($(this).toggleClass("current"),$(this).hasClass("current"))if(idx>clickLastIdx)for(i=clickLastIdx;i<idx;i++)$list.children("li").eq(i).addClass("current");else for(i=clickLastIdx;i>idx;i--)$list.children("li").eq(i).addClass("current");else if(idx>clickLastIdx)for(i=clickLastIdx;i<idx;i++)$list.children("li").eq(i).removeClass("current");else for(i=clickLastIdx;i>idx;i--)$list.children("li").eq(i).removeClass("current");"approval"==_this._typeName&&$list.children("li.current").each(function(){currentLength=$list.children("li.current").length})}else $(this).addClass("current").siblings().removeClass("current");"approval"==_this._typeName&&($(this).hasClass("type-sender")&&$(this).hasClass("current")?($listControl.find(".side-left .row-type button").attr("disabled","disabled"),$listControl.find(".side-left .list-control-btn button").attr("disabled","disabled"),_this._sender=!0):$(this).parent().children(".type-sender").hasClass("current")||($listControl.find(".side-left .row-type button").removeAttr("disabled"),$listControl.find(".side-left .list-control-btn button").removeAttr("disabled"),_this._sender=!1))}),this._selector.on("click",".form-receiver-list > .list-control .list-control-btn > button",function(){var currentIdx=new Array,listLastIdx=($list=$(this).parents(".list-control").next("ul")).find("li:last").index();if($list.children("li").each(function(){if($(this).hasClass("current")){var idx=$(this).index();currentIdx.push(idx)}}),$(this).hasClass("next"))currentIdx.reverse(),-1==$.inArray(listLastIdx,currentIdx)&&$.each(currentIdx,function(index,value){$list.children("li").eq(value).insertAfter($list.children("li").eq(value+1)),"approval"==_this._typeName&&$list.children("li").each(function(i){$(this).hasClass("current")&&($list.children("li").eq(value).find(".num").text(value),$list.children("li").eq(i).find(".num").text(i))})});else if($(this).hasClass("prev"))-1==("approval"==_this._typeName?$.inArray(1,currentIdx):$.inArray(0,currentIdx))&&$.each(currentIdx,function(index,value){$list.children("li").eq(value).insertBefore($list.children("li").eq(value-1)),"approval"==_this._typeName&&$list.children("li").each(function(i){$(this).hasClass("current")&&($list.children("li").eq(value).find(".num").text(value),$list.children("li").eq(i).find(".num").text(i))})});else if($(this).hasClass("delete")){$(this).parents("tbody").find(".frm-component");var $list=$(this).parents(".list-control").next("ul");"approval"!=_this._typeName?$list.find("li").each(function(){if("none"!=$(this).find(".receive-role").css("display")){if($(this).hasClass("current")&&($(this).find(".role").hasClass("req")||$(this).find(".role").hasClass("opt")))$(this).remove();else if($(this).hasClass("current")&&(!$(this).find(".role").hasClass("req")||!$(this).find(".role").hasClass("opt")))return alert("본인 및 등록자는 삭제할 수 없습니다."),!1}else $(this).hasClass("current")&&$(this).remove()}):($list.find("li").each(function(){$(this).hasClass("current")&&$(this).remove()}),$.fn.listNumber($(this))),$.fn.memberCount($(this))}}),this._selector.on("selectstart",".form-receiver-list > ul > li",function(){return!1}),this._selector.on("click",".form-receiver-list > ul .del02",function(){$(this).parents("tbody").find(".frm-component");"approval"==_this._typeName&&($.fn.listNumber($(this)),$.fn.memberCount($(this))),"default"==_this._typeName||"plan"==_this._typeName?$(this).parents("li").find(".role").hasClass("req")||$(this).parents("li").find(".role").hasClass("opt")?($(this).parents("li").remove(),$.fn.memberCount($(this))):alert("본인 및 등록자는 삭제할 수 없습니다."):($(this).parents("li").remove(),$.fn.memberCount($(this)))}),this._typeName){case"approval":this.approval();break;default:this.mail(),this.plan(),this.todo()}},integrated.prototype.mail=function(){this._selector.on("click",".form-receiver-list > ul .receive-type > button",function(){$(this).addClass("on").siblings().removeClass("on")}),this._selector.on("click",".form-receiver-list > .list-control .receive-type > button",function(){var idx=$(this).index(),$list=$(this).parents(".form-receiver-list").children("ul");$(this).addClass("on").siblings().removeClass("on"),$list.find("li.current").each(function(i){$(this).find(".receive-type > button").eq(idx).addClass("on").siblings().removeClass("on")})})},integrated.prototype.plan=function(){this._selector.on("click",".form-receiver-list > ul .role",function(){$(this).hasClass("req")?$(this).addClass("opt").removeClass("req").text("선택 참석자"):$(this).hasClass("opt")?$(this).removeClass("opt").text("주관자"):$(this).addClass("req").text("필수 참석자")})},integrated.prototype.todo=function(){this._selector.on("click",".form-receiver-list > ul .todo",function(){$(this).toggleClass("current")})},integrated.prototype.approval=function(){this._selector.on("click",".form-receiver-list > ul .receive-type > button",function(){var className;switch($(this).index()){case 0:className="app";break;case 1:className="con";break;case 2:className="noti"}$(this).addClass(className).siblings().attr("class","button-type")}),this._selector.on("click",".form-receiver-list .row-type > button.post",function(){var $list=$(this).parents(".form-receiver-list").children("ul");$list.find("li.current").each(function(){$list.find("li").eq(0).hasClass("current")||$(this).find(".receive-type").html("<button type='button' class='button-type post'>후결</button>")})}),this._selector.on("click",".form-receiver-list > .list-control .receive-type > button",function(){var className,idx=$(this).index(),$list=$(this).parents(".form-receiver-list").children("ul");switch(idx){case 0:className="app";break;case 1:className="con";break;case 2:className="noti"}$(this).addClass("on").siblings().removeClass("on"),$list.find("li.current").each(function(){$list.find("li").eq(0).hasClass("current")||$(this).find(".receive-type > button").eq(idx).addClass(className).siblings().attr("class","button-type")})}),this._selector.on("click",".form-receiver-list > ul .receive-role > button",function(){$(this).toggleClass("on")}),this._selector.on("click",".form-receiver-list > .list-control .receive-role-head > button",function(){var idx=$(this).index(),$list=$(this).parents(".form-receiver-list").children("ul"),onChk=[];$list.find("li.current").each(function(i){$(this).find(".receive-role > button").eq(idx).hasClass("on")&&onChk.push(i)}),$list.find("li.current").each(function(){onChk.length>0?$(this).find(".receive-role > button").eq(idx).removeClass("on"):$(this).find(".receive-role > button").eq(idx).addClass("on")})}),this._selector.on("click",".form-receiver-list > .list-control .row-type > button.row",function(){var $list=$(this).parents(".form-receiver-list").children("ul"),listLength=$list.find("li").length,rowChk=[],currentChk=[];for(i=1;i<listLength;i++)($list.find("li").eq(i).find(".receive-type button").hasClass("post")||$list.find("li").eq(i).find(".receive-type button").hasClass("noti"))&&rowChk.push(i);for(i=1;i<listLength;i++)$list.find("li").eq(i).hasClass("current")&&currentChk.push(i);0==rowChk.length?currentChk.length>=2?$list.find("li.current").each(function(){var type;$(this).find(".receive-type button").hasClass("app")?type="app":$(this).find(".receive-type button").hasClass("con")&&(type="con"),$(this).find(".receive-type button").remove(),"app"==type?$(this).find(".receive-type").html("<button type='button' class='button-type app full'>병렬결재</button>"):"con"==type&&$(this).find(".receive-type").html("<button type='button' class='button-type con full'>병렬합의</button>")}):alert("병렬 결재자는 2명 이상 선택하여 주십시오."):alert("병렬은 결재 또는 합의자만 지정 가능합니다.")}),this._selector.on("click",".form-receiver-list > .list-control .row-type > button.row-free",function(){var $list=$(this).parents(".form-receiver-list").children("ul"),listLength=$list.find("li").length;for(i=1;i<listLength;i++)$list.find("li").eq(i).find(".receive-type button").hasClass("full")&&($list.find("li").eq(i).find(".receive-type button").hasClass("app")?($list.find("li").eq(i).find(".receive-type button").remove(),$list.find("li").eq(i).find(".receive-type").html("<button type='button' class='button-type app'>결재</button> <button type='button' class='button-type'>합의</button> <button type='button' class='button-type'>통보</button>")):($list.find("li").eq(i).find(".receive-type button").remove(),$list.find("li").eq(i).find(".receive-type").html("<button type='button' class='button-type'>결재</button> <button type='button' class='button-type con'>합의</button> <button type='button' class='button-type'>통보</button>")))}),this._selector.on("click",".form-receiver-list > .list-control .receive-role-head > button.small",function(){var $list=$(this).parents(".form-receiver-list").children("ul"),$listLast=$list.find("li:last"),listLastIdx=$list.find("li:last").index();$listLast.after("<li class='type-select'><span class='num'>"+(listLastIdx+1)+"</span><span class='type receive-type'><button type='button' class='button-type'>결재</button> <button type='button' class='button-type'>합의</button> <button type='button' class='button-type'>후결</button> <button type='button' class='button-type'>통보</button></span><span class='name'></span><span class='name mod'><div class='ipt-box'><div class='ipt'><input type='text' class='input01' id='newMail' placeholder='예시) 소속그룹장' value=''><label for='newMail' class='blind'>결재경로 추가</label></div><button type='button' class='button default'><span>확인</span></button></div></span><span class='pos receive-role'><button type='button' class='button-img del02'><span>삭제</span></button></span></li>"),$listLast.next().find("input[type='text']").trigger("focus")}),this._selector.on("click",".form-receiver-list > ul .name.mod button",function(){var $name=$(this).parents("li").find(".name:not('.mod')"),$nameMod=$(this).parents("li").find(".name.mod"),$receiveRole=$(this).parents("li").find(".receive-role"),title=$(this).prev().children("input[type='text']").val();$name.text(title),$name.show(),$nameMod.hide(),$receiveRole.children("button").removeClass("on").show()}),this._selector.on("keydown",".form-receiver-list > ul .name.mod input[type='text']",function(event){var title=$(this).val();$.fn.result=function(result){var $name=result.parents("li").find(".name:not('.mod')"),$nameMod=result.parents("li").find(".name.mod"),$receiveRole=result.parents("li").find(".receive-role");$name.show(),$nameMod.hide(),$receiveRole.children("button").removeClass("on").show()},13==event.keyCode&&(""!=title?($.fn.result($(this)),$(this).parents("li").find(".name:not('.mod')").text(title)):$(this).parents("li").remove()),27==event.keyCode&&$(this).parents("li").remove()})},integrated}(jQuery);
//# sourceMappingURL=../maps/ui/Integrated.js.map
