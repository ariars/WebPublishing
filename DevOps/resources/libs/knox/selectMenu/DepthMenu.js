var DepthMenu=function($){function DepthMenu(option){this.create(option),this.initialize()}return DepthMenu.prototype=new SelectMenu,DepthMenu.prototype.construct=DepthMenu,DepthMenu.prototype.initialize=function(){var _this=this;this._$layer.find(".item-more").removeClass("item-more"),this._$layer.find("li:not(.line)").each(function(){2!=$(this).children().length||!$(this).children().eq(1).is("div")&&!$(this).children().eq(1).is("ul")||$(this).children().eq(1).hasClass("ly-btn-sel")||($(this).addClass("item-more"),$(this).children().eq(1).addClass("js-sub").hide())}),this._$layer.find(".layer-list").each(function(i){$(this).find("> li:not(.line)").each(function(idx){$(this).data("select-item-idx",idx)})}),this._$btn.bind("click.selectMenu",function(){_this._$layer.find(".current").each(function(){$(this).parents(".integration").size()||$(this).removeClass("current")})}),this._$layer.find("li.item-more").bind("click.selectMenu",function(e){_this.depthClick($(this),e)}),"function"==typeof this._option.select&&(this._clickHandler=function(){_this.select($(this))},this._$layer.off("click.selectMenu"),this._$layer.find(this._selectSelector).unbind("click.selectMenu",this._clickHandler),this._$layer.find(this._selectSelector).bind("click.selectMenu",this._clickHandler))},DepthMenu.prototype.depthClick=function(target,e){e.stopPropagation();var $target=target;if(!$target.hasClass("dis")&&$target.hasClass("item-more")&&0!=$target.find("> .js-sub").length){$target.addClass("current").siblings().filter(".current").removeClass("current"),$target.siblings().find(".js-sub").hide(),$("> .js-sub",target).show();var objLeft=$("> .js-sub",target).parent().offset().left+$("> .js-sub",target).parent().outerWidth(!0)+$("> .js-sub",target).outerWidth(!0),objTop=$("> .js-sub",target).parent().offset().top+$("> .js-sub",target).parent().outerHeight(!0)+$("> .js-sub",target).outerHeight(!0);objLeft>this._$wrap.width()?$("> .js-sub",target).css({left:-$("> .js-sub",target).outerWidth(!0)}):$("> .js-sub",target).css({left:$("> .js-sub",target).parent().outerWidth(!0)}),objTop>this._$wrap.height()?$("> .js-sub",target).css({top:-$("> .js-sub",target).outerHeight(!0)+$("> .js-sub",target).parent().outerHeight(!0)}):$("> .js-sub",target).css({top:-1})}},DepthMenu.prototype.reset=function(){this._$layer.find(".js-sub-select").removeClass("js-sub-select"),this._$layer.find(".js-sub-tree").removeClass("js-sub-tree"),this.disable(),this.enable(),this.initialize(),"function"==typeof this._option.addEvt&&this.addEvt()},DepthMenu.prototype.disableList=function(i){},DepthMenu.prototype.enableList=function(i){},DepthMenu.prototype.cateAdd=function(name,color){if(void 0!=name&&void 0!=color){var cateName=name,cateColor=color,cateClone=this._$layer.find(".integration li").eq(0).clone().removeClass("current");cateClone.find(".ts em").text(cateName).attr("title",cateName),cateClone.find(".tag.import").removeClass("import").addClass(cateColor),this._$layer.find(".integration ul").append(cateClone)}},DepthMenu.prototype.cateListSet=function(info){if(void 0!=info&&$.isArray(info)){var _this=this,data=info;this._$layer.find(".integration li").eq(0).siblings().remove(),$.each(data,function(i,item){var cateName=item.name,cateColor=item.color;_this.cateAdd(cateName,cateColor)})}},DepthMenu.prototype.select=function(target){var $target=target;if(!$target.hasClass("dis")){var hasCls=this._selectSelector;if(hasCls=hasCls.substring(1,hasCls.length),$target.hasClass(hasCls)){$target.addClass("current").siblings().filter(".current").removeClass("current");var depthArr=[],idx=($target.parents(".js-sub").length,$target.data("select-item-idx"));$target.parents("li").each(function(){depthArr.unshift($(this).data("select-item-idx"))}),depthArr.push(idx);var $liEl=$target,$trEl=this._$chkTr;this._option.select(depthArr,$liEl,$trEl),this.hide()}}},DepthMenu.prototype.destroy=function(){this.disable(),this._clone?this._$layer.remove():(this._$layer.after(this._$layerBackup),this._$layer.remove(),null!=this._panelClass&&this._isDelete&&$(this._boxSelector).addClass("js-layer-box").remove()),$(window).unbind("customEvent.globalLayerDelete",this._globalLayerDeleteHandler),$(window).unbind("resize.selectMenu",this._resizeHandler),$(window).unbind("resize.selectMenu",this._resizeSelectMenuHandler),$(document).unbind("mousedown.selectMenu",this._mouseDownHandler),$(document).unbind("mousedown.selectMenu",this._mouseDownHandler2),this._$btn.unbind("click.selectMenu"),this._$layer.find("li.item-more").unbind("click.selectMenu"),this._$layer.find(this._selectSelector).bind("click.selectMenu"),this._option=null,this._initChk=null,this._$win=null,this._$wrap=null,this._btnSelector=null,this._boxSelector=null,this._clone=null,this._remove=null,this._panelClass=null,this._isDelete=null,this._showType=null,this._selectSelector=null,this._selectChange=null,this._position=null,this._positionLeft=null,this._positionTop=null,this._itemSelector=null,this._disableBtn=null,this._disableList=null,this._$btn=null,this._$layerBackup=null,this._mouseGetLeft=null,this._mouseGetTop=null,this._keyEvt=null,this.create=null,this.init=null,this.leftClick=null,this.rightClick=null,this.hover=null,this.mouseover=null,this.mouseout=null,this.select=null,this.setSelect=null,this.disableBtn=null,this.enableBtn=null,this.disableList=null,this.enableList=null,this.itemClick=null,this.colorSelect=null,this.hide=null,this.disable=null,this.enable=null,this.addEvt=null,this.getLayer=null,this.initialize=null,this.depthClick=null,this.reset=null,this.cateAdd=null,this.cateListSet=null,this.destroy=null},DepthMenu}(jQuery);
//# sourceMappingURL=../maps/selectMenu/DepthMenu.js.map
